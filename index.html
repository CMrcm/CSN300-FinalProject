<!--This page calculates the experience points to be rewarded to a group after an encounter-->

<html>
	<head>
		
		<title>Hoard Generator</title>
		
		<!--stylesheet reference-->
		<link rel="stylesheet" href="style/datstyle.css"/>
		
		<!--javascript function-->
		<script language="javascript" type="text/javascript">
		
		//DICE!
		function D4(x) {
			var accumulation = 0;
			while (x!=0){
				accumulation = accumulation + (Math.ceil(Math.ceil(Math.random()*100)/25));
				x--;
			}
			return accumulation;
		}
		
		function D6(x) {
			var accumulation = 0;
			while (x!=0){
				accumulation = accumulation + (Math.ceil(Math.ceil(Math.random()*100)/16));
				x--;
			}
			return accumulation;
		}
		
		function D8(x) {
			var accumulation = 0;
			while (x!=0){
				accumulation = accumulation + (Math.ceil(Math.ceil(Math.random()*100)/12));
				x--;
			}
			return accumulation;
		}
		
		function D10(x) {
			var accumulation = 0;
			while (x!=0){
				accumulation = accumulation + (Math.ceil(Math.random()*10));
				x--;
			}
			return accumulation;
		}
		
		function D12(x) {
			var accumulation = 0;
			while (x!=0){
				accumulation = accumulation + (Math.ceil(Math.ceil(Math.random()*100)/8));
				x--;
			}
			return accumulation;
		}
		
		function D100(x) {
			var accumulation = 0;
			while (x!=0){
				accumulation = accumulation +(Math.ceil(Math.random()*100));
				x--;
			}
			return accumulation;
		}
		
		//Gem generator returns <parameter># of randomly generated gems and their values
		function Gem(x) {
			
			var gems = ["moss agate","azurite","blue quartz","hematite","lapis lazuli","malachite","obsidian","rhodochrosite",
						"tiger eye turquoise","pearl","bloodstone","carnelian","chalcedony","chrysoprase","citrine","iolite",
						"jasper","moonstone","onyx","peridot","clear quartz","sardonyx","rose quartz","zircon","amber","amethyst",
						"chrysoberyl","coral","garnet","jade","jet","golden pearl","red spinel","tourmaline","alexandrite",
						"aquamarine","black pearl","topaz","emerald","opal","sapphire","corundum","ruby","diamond","jacinth",
						"green spinel","smoky quartz","star sapphire","deep blue spinel","red-brown garnet"];

			var y;
			var cost = "";
			var gemList = "";
			
			while (x!=0) {
				
				y = D100(1);
				
				if (y<26) {
				
					cost = D4(4) + " gp";
				
				} else if (25<y && y<51) {
				
					cost = D4(2)*10 + " gp";
					
				} else if (50<y && y<71) {
				
					cost = D4(4)*10 + " gp";
					
				} else if (70<y && y<91) {
				
					cost = D4(2)*100 + " gp";
					
				} else if (90<y && y<100) {
				
					cost = D4(2)*1000 + " gp";
					
				} else {
				
					cost = D4(4) + " gp";
				}
				
				gemList += gems[Math.floor(Math.ceil(Math.random()*100)/2)] + " (" + cost + ") <br />";
				x--;
			}//end while
			
			document.getElementById("output3").innerHTML = gemList;
			
		}//end GemArt
		
		//generates art objects the same as Gem()
		function Art(x) {
		
			var art =	["silver ewer","carved statuette","finely wrought bracelet","vestments","gemmed comb","silver sword",
						"velvet gemmed mask","silver chalice","large wool tapestry","mug with jade inlay","silver gemmed sword",
						"carved harp","solid gold idol","gold comb","gold gemmed comb","gemmed bottle stopper","ceremonial dagger",
						"gemmed eyepatch","pendant","old painting","silk mantle","sapphire pendant","bejeweled glove","music box",
						"jeweled anklet","gold gemmed circlet","string of pearls","jeweled crown","jeweled ring","gold chalice",
						"silver chalice","medallion","gemmed earings","jeweled scepter","fine carpet","fine violin","gold inlaid lute",
						"gemmed holy symbol","spool of fine thread","silk tapestry","candellabra","fine lockbox","gemmed slippers",
						"bejeweled hand mirror","masterpiece painting","gold shortsword","fine dress","carved bone statuette",
						"finely carved smoking pipe","ceremonial chestplate"];
			
			var y;
			var cost = "";
			var artList = "";
			
			while (x!=0) {
			
			y = D100(1);
				
				if (y<11) {
				
					cost = D10(1)*10 + " gp";
				
				} else if (10<y && y<26) {
				
					cost = D6(3)*10 + " gp";
					
				} else if (25<y && y<41) {
				
					cost = D6(1)*100 + " gp";
					
				} else if (40<y && y<51) {
				
					cost = D10(1)*100 + " gp";
					
				} else if (50<y && y<61) {
				
					cost = D6(2)*100 + " gp";
					
				} else if (60<y && y<71) {
				
					cost = D6(2)*100 + " gp";
					
				} else if (70<y && y<81) {
				
					cost = D6(3)*100 + " gp";
					
				} else if (80<y && y<86) {
				
					cost = D6(5)*100 + " gp";
					
				} else if (85<y && y<91) {
				
					cost = D4(1)*1000 + " gp";
					
				} else if (90<y && y<96) {
				
					cost = D6(1)*1000 + " gp";
					
				} else if (95<y && y<100) {
				
					cost = D4(2)*1000 + " gp";
					
				} else {
				
					cost = D6(2)*1000 + " gp";
				}
				
				artList += art[Math.floor(Math.ceil(Math.random()*100)/2)] + " (" + cost + ") <br />";
				x--;
			
			}//end while
		
			document.getElementById("output3").innerHTML = artList;
		
		}//end Art
		
		//function attached to button
		function go () {
			var lvl = document.getElementById('level').value;
			var cr = document.getElementById('CR').value;
			var ovrLvl = false;
			var cdif;
			var xp;
			var roll;
			/*constants for equations*/
			var EvC = 300;
			var OvOdC = 200;
			var UnOdC = 450;
			
			/*lvls 1-4 don't follow later patterns, corrections done here*/
			/*quietly change levels < 3 to 3*/
			if (lvl < 3) {
				lvl = 3;
			
			/*lvl 4 requires adjustments of constants and special case*/
			} else if (lvl == 4) {
				UnOdC = 400;
			} else { /*nothing*/ }
			
			/*calc cdif*/
			cdif = cr - lvl;
			
			/*determine over/underlvl*/
			if (cdif < 0) {
				ovrLvl = true;
			} else { /* nothing */ }
			
			/*nested if statements! everyone's favorite!*/
			/*challenge rating too high/low*/
			if (-7 > cdif || cdif > 7) {
				xp = "Imbalanced challenge; Award no XP.\n";
				document.getElementById("output1").hidden = false;
				document.getElementById("output1").innerHTML = xp;
				
			} else {
			
				/*cdif even? lvl*2^(cdif/2)*300*/
				if (cdif % 2 == 0) {
					xp = Math.round(lvl*Math.pow(2,(cdif/2))*EvC);
					document.getElementById("output1").hidden = false;
					document.getElementById("output1").innerHTML = "Award: " + xp + "xp\n";
					
				/*cdif odd?*/
				} else {
				
					/*overleveled party*/
					if (ovrLvl == true) {
						xp = lvl*Math.pow(2,((cdif+1)/2))*OvOdC;
						document.getElementById("output1").hidden = false;
						document.getElementById("output1").innerHTML = "Award: " + xp + "xp\n";
						
					/*underleveled party*/
					} else {
						xp = lvl*Math.pow(2,((cdif-1)/2))*UnOdC;
						document.getElementById("output1").hidden = false;
						document.getElementById("output1").innerHTML = "Award: " + xp + "xp\n";
						
					}/*end final case else*/
					
				}/*end even/odd else*/
				
			}/*end abs value else*/
			
			/*treasure...here we go.  There is no pattern to it according to the rules.  It simply*
			  must be coded 1for1.  So many ifs...so many...  Tried to use a switch function but I banged*
			  my head against for a day before just deciding to go with the devil I knew.*/
			  
			if (cr==1) {
				
				//coins
				roll = D100(1);
				if (roll<15) {
					document.getElementById("output2").innerHTML = "No coins.";
				} else if (14<roll && roll<30) {
					document.getElementById("output2").innerHTML = D6(1)*1000 + " copper.";
				} else if (29<roll && roll<53) {
					document.getElementById("output2").innerHTML = D8(1)*100 + " silver.";
				} else if (52<roll && roll<96) {
					document.getElementById("output2").innerHTML = D8(2)*10 + " gold.";
				} else {
					document.getElementById("output2").innerHTML = D4(1)*10 + " platinum.";
				}//end coins
				
				//art
				roll = D100(1);
				if (roll<91) {
					document.getElementById("output3").innerHTML = "No goods.";
				} else if (90<roll && roll<96) {
					Gem(1);
				} else {
					Art(1);
				}//end art
				
			}//end lvl 1
			
			else if (cr==2) {

				roll = D100(1);
				if (roll<14) {
					document.getElementById("output2").innerHTML = "No coins.";
				} else if (13<roll && roll<24) {
					document.getElementById("output2").innerHTML = D10(1)*1000 + " copper.";
				} else if (23<roll && roll<44) {
					document.getElementById("output2").innerHTML = D10(2)*100 + " silver.";
				} else if (43<roll && roll<96) {
					document.getElementById("output2").innerHTML = D10(4)*10 + " gold.";
				} else {
					document.getElementById("output2").innerHTML = D8(2)*10 + " platinum.";
				}//end coins
				
				//art
				roll = D100(1);
				if (roll<82) {
					document.getElementById("output3").innerHTML = "No goods.";
				} else if (81<roll && roll<96) {
					Gem(Math.ceil(D6(1)/2));
				} else {
					Art(Math.ceil(D6(1)/2));
				}//end art
			
			}//end lvl 2
			
			else if (cr==3) {
				
				roll = D100(1);
				if (roll<12) {
					document.getElementById("output2").innerHTML = "No coins.";
				} else if (11<roll && roll<22) {
					document.getElementById("output2").innerHTML = D10(2)*1000 + " copper.";
				} else if (21<roll && roll<42) {
					document.getElementById("output2").innerHTML = D8(4)*100 + " silver.";
				} else if (41<roll && roll<96) {
					document.getElementById("output2").innerHTML = D10(4)*10 + " gold.";
				} else {
					document.getElementById("output2").innerHTML = D10(1)*10 + " platinum.";
				}//end coins
				
				//art
				roll = D100(1);
				if (roll<78) {
					document.getElementById("output3").innerHTML = "No goods.";
				} else if (77<roll && roll<96) {
					Gem(Math.ceil(D6(1)/2));
				} else {
					Art(Math.ceil(D6(1)/2));
				}//end art
				
			}//end lvl 3
			
			else if (cr==4) {

				roll = D100(1);
				if (roll<12) {
					document.getElementById("output2").innerHTML = "No coins.";
				} else if (11<roll && roll<22) {
					document.getElementById("output2").innerHTML = D10(3)*1000 + " copper.";
				} else if (21<roll && roll<42) {
					document.getElementById("output2").innerHTML = D12(4)*1000 + " silver.";
				} else if (41<roll && roll<96) {
					document.getElementById("output2").innerHTML = D6(1)*100 + " gold.";
				} else {
					document.getElementById("output2").innerHTML = D8(1)*10 + " platinum.";
				}//end coins
				
				//art
				roll = D100(1);
				if (roll<71) {
					document.getElementById("output3").innerHTML = "No goods.";
				} else if (70<roll && roll<96) {
					Gem(D4(1));
				} else {
					Art(Math.ceil(D6(1)/2));
				}//end art
				
			}//end lvl 4
			
			else if (cr==5) {

				roll = D100(1);
				if (roll<11) {
					document.getElementById("output2").innerHTML = "No coins.";
				} else if (10<roll && roll<20) {
					document.getElementById("output2").innerHTML = D4(1)*10000 + " copper.";
				} else if (19<roll && roll<39) {
					document.getElementById("output2").innerHTML = D6(1)*1000 + " silver.";
				} else if (38<roll && roll<96) {
					document.getElementById("output2").innerHTML = D8(1)*100 + " gold.";
				} else {
					document.getElementById("output2").innerHTML = D10(1)*10 + " platinum.";
				}//end coins
				
				//art
				roll = D100(1);
				if (roll<61) {
					document.getElementById("output3").innerHTML = "No goods.";
				} else if (60<roll && roll<96) {
					Gem(D4(1));
				} else {
					Art(D4(1));
				}//end art
				
			}//end lvl 5
			
			else if (cr==6) {

				roll = D100(1);
				if (roll<11) {
					document.getElementById("output2").innerHTML = "No coins.";
				} else if (10<roll && roll<19) {
					document.getElementById("output2").innerHTML = D6(1)*10000 + " copper.";
				} else if (18<roll && roll<38) {
					document.getElementById("output2").innerHTML = D8(1)*1000 + " silver.";
				} else if (37<roll && roll<96) {
					document.getElementById("output2").innerHTML = D10(1)*100 + " gold.";
				} else {
					document.getElementById("output2").innerHTML = D12(1)*10 + " platinum.";
				}//end coins
				
				//art
				roll = D100(1);
				if (roll<57) {
					document.getElementById("output3").innerHTML = "No goods.";
				} else if (56<roll && roll<93) {
					Gem(D4(1));
				} else {
					Art(D4(1));
				}//end art
			
			}//end lvl 6
			
			else if (cr==7) {
			
				roll = D100(1);
				if (roll<12) {
					document.getElementById("output2").innerHTML = "No coins.";
				} else if (11<roll && roll<19) {
					document.getElementById("output2").innerHTML = D10(1)*10000 + " copper.";
				} else if (18<roll && roll<36) {
					document.getElementById("output2").innerHTML = D12(1)*1000 + " silver.";
				} else if (35<roll && roll<94) {
					document.getElementById("output2").innerHTML = D6(2)*100 + " gold.";
				} else {
					document.getElementById("output2").innerHTML = D4(3)*10 + " platinum.";
				}//end coins
				
				//art
				roll = D100(1);
				if (roll<49) {
					document.getElementById("output3").innerHTML = "No goods.";
				} else if (48<roll && roll<89) {
					Gem(D4(1));
				} else {
					Art(D4(1));
				}//end art

			}//end lvl 7
			
			else if (cr==8) {

				roll = D100(1);
				if (roll<11) {
					document.getElementById("output2").innerHTML = "No coins.";
				} else if (10<roll && roll<16) {
					document.getElementById("output2").innerHTML = D12(1)*10000 + " copper.";
				} else if (15<roll && roll<30) {
					document.getElementById("output2").innerHTML = D6(2)*1000 + " silver.";
				} else if (29<roll && roll<88) {
					document.getElementById("output2").innerHTML = D8(2)*100 + " gold.";
				} else {
					document.getElementById("output2").innerHTML = D6(3)*10 + " platinum.";
				}//end coins
				
				//art
				roll = D100(1);
				if (roll<46) {
					document.getElementById("output3").innerHTML = "No goods.";
				} else if (45<roll && roll<86) {
					Gem(D6(1));
				} else {
					Art(D4(1));
				}//end art
			
			}//end lvl 8
			
			else if (cr==9) {

				roll = D100(1);
				if (roll<11) {
					document.getElementById("output2").innerHTML = "No coins.";
				} else if (10<roll && roll<16) {
					document.getElementById("output2").innerHTML = D6(2)*10000 + " copper.";
				} else if (15<roll && roll<30) {
					document.getElementById("output2").innerHTML = D8(2)*1000 + " silver.";
				} else if (29<roll && roll<86) {
					document.getElementById("output2").innerHTML = D4(5)*100 + " gold.";
				} else {
					document.getElementById("output2").innerHTML = D12(2)*10 + " platinum.";
				}//end coins
				
				//art
				roll = D100(1);
				if (roll<41) {
					document.getElementById("output3").innerHTML = "No goods.";
				} else if (40<roll && roll<81) {
					Gem(D8(1));
				} else {
					Art(D4(1));
				}//end art
			
			}//end lvl 9
			
			else if (cr==10) {
			
				roll = D100(1);
				if (roll<11) {
					document.getElementById("output2").innerHTML = "No coins.";
				} else if (10<roll && roll<25) {
					document.getElementById("output2").innerHTML = D10(2)*1000 + " silver.";
				} else if (24<roll && roll<80) {
					document.getElementById("output2").innerHTML = D4(6)*100 + " gold.";
				} else {
					document.getElementById("output2").innerHTML = D6(5)*10 + " platinum.";
				}//end coins
				
				//art
				roll = D100(1);
				if (roll<36) {
					document.getElementById("output3").innerHTML = "No goods.";
				} else if (35<roll && roll<80) {
					Gem(D8(1));
				} else {
					Art(D6(1));
				}//end art
				
			}//end lvl 10
			
			else if (cr==11) {
			
				roll = D100(1);
				if (roll<9) {
					document.getElementById("output2").innerHTML = "No coins.";
				} else if (8<roll && roll<15) {
					document.getElementById("output2").innerHTML = D10(3)*1000 + " silver.";
				} else if (14<roll && roll<76) {
					document.getElementById("output2").innerHTML = D8(4)*100 + " gold.";
				} else {
					document.getElementById("output2").innerHTML = D10(4)*10 + " platinum.";
				}//end coins
				
				//art
				roll = D100(1);
				if (roll<25) {
					document.getElementById("output3").innerHTML = "No goods.";
				} else if (24<roll && roll<75) {
					Gem(D10(1));
				} else {
					Art(D6(1));
				}//end art

			}//end lvl 11
			
			else if (cr==12) {
			
				roll = D100(1);
				if (roll<9) {
					document.getElementById("output2").innerHTML = "No coins.";
				} else if (8<roll && roll<15) {
					document.getElementById("output2").innerHTML = D12(3)*1000 + " silver.";
				} else if (14<roll && roll<76) {
					document.getElementById("output2").innerHTML = D4(1)*1000 + " gold.";
				} else {
					document.getElementById("output2").innerHTML = D4(1)*100 + " platinum.";
				}//end coins
				
				//art
				roll = D100(1);
				if (roll<18) {
					document.getElementById("output3").innerHTML = "No goods.";
				} else if (17<roll && roll<71) {
					Gem(D10(1));
				} else {
					Art(D8(1));
				}//end art
			
			}//end lvl 12
			
			else if (cr==13) {
			
				roll = D100(1);
				if (roll<9) {
					document.getElementById("output2").innerHTML = "No coins.";
				} else if (8<roll && roll<76) {
					document.getElementById("output2").innerHTML = D4(1)*1000 + " gold.";
				} else {
					document.getElementById("output2").innerHTML = D10(1)*100 + " platinum.";
				}//end coins
				
				//art
				roll = D100(1);
				if (roll<12) {
					document.getElementById("output3").innerHTML = "No goods.";
				} else if (11<roll && roll<67) {
					Gem(D12(1));
				} else {
					Art(D10(1));
				}//end art

			}//end lvl 13
			
			else if (cr==14) {
			
				roll = D100(1);
				if (roll<9) {
					document.getElementById("output2").innerHTML = "No coins.";
				} else if (8<roll && roll<76) {
					document.getElementById("output2").innerHTML = D6(1)*1000 + " gold.";
				} else {
					document.getElementById("output2").innerHTML = D12(1)*100 + " platinum.";
				}//end coins
				
				//art
				roll = D100(1);
				if (roll<12) {
					document.getElementById("output3").innerHTML = "No goods.";
				} else if (11<roll && roll<67) {
					Gem(D12(1));
				} else {
					Art(D10(1));
				}//end art

			}//end lvl 14
			
			else if (cr==15) {
			
				roll = D100(1);
				if (roll<4) {
					document.getElementById("output2").innerHTML = "No coins.";
				} else if (3<roll && roll<75) {
					document.getElementById("output2").innerHTML = D8(1)*1000 + " gold.";
				} else {
					document.getElementById("output2").innerHTML = D4(3)*100 + " platinum.";
				}//end coins
				
				//art
				roll = D100(1);
				if (roll<10) {
					document.getElementById("output3").innerHTML = "No goods.";
				} else if (9<roll && roll<66) {
					Gem(D10(2));
				} else {
					Art(D8(2));
				}//end art

			}//end lvl 15
			
			else if (cr==16) {
			
				roll = D100(1);
				if (roll<4) {
					document.getElementById("output2").innerHTML = "No coins.";
				} else if (3<roll && roll<75) {
					document.getElementById("output2").innerHTML = D12(1)*1000 + " gold.";
				} else {
					document.getElementById("output2").innerHTML = D4(3)*100 + " platinum.";
				}//end coins
				
				//art
				roll = D100(1);
				if (roll<8) {
					document.getElementById("output3").innerHTML = "No goods.";
				} else if (7<roll && roll<65) {
					Gem(D6(4));
				} else {
					Art(D10(2));
				}//end art

			}//end lvl 16
			
			else if (cr==17) {
			
				roll = D100(1);
				if (roll<4) {
					document.getElementById("output2").innerHTML = "No coins.";
				} else if (3<roll && roll<69) {
					document.getElementById("output2").innerHTML = D4(3)*1000 + " gold.";
				} else {
					document.getElementById("output2").innerHTML = D10(2)*100 + " platinum.";
				}//end coins
				
				//art
				roll = D100(1);
				if (roll<5) {
					document.getElementById("output3").innerHTML = "No goods.";
				} else if (4<roll && roll<64) {
					Gem(D8(4));
				} else {
					Art(D8(3));
				}//end art

			}//end lvl 17
			
			else if (cr==18) {
			
				roll = D100(1);
				if (roll<3) {
					document.getElementById("output2").innerHTML = "No coins.";
				} else if (2<roll && roll<66) {
					document.getElementById("output2").innerHTML = D6(3)*1000 + " gold.";
				} else {
					document.getElementById("output2").innerHTML = D4(5)*100 + " platinum.";
				}//end coins
				
				//art
				roll = D100(1);
				if (roll<5) {
					document.getElementById("output3").innerHTML = "No goods.";
				} else if (4<roll && roll<55) {
					Gem(D12(3));
				} else {
					Art(D10(3));
				}//end art

			}//end lvl 18
			
			else if (cr==19) {
			
				roll = D100(1);
				if (roll<3) {
					document.getElementById("output2").innerHTML = "No coins.";
				} else if (2<roll && roll<66) {
					document.getElementById("output2").innerHTML = D8(3)*1000 + " gold.";
				} else {
					document.getElementById("output2").innerHTML = D10(3)*100 + " platinum.";
				}//end coins
				
				//art
				roll = D100(1);
				if (roll<4) {
					document.getElementById("output3").innerHTML = "No goods.";
				} else if (3<roll && roll<51) {
					Gem(D6(6));
				} else {
					Art(D6(6));
				}//end art

			}//end lvl 19
			
			else {
			
				roll = D100(1);
				if (roll<3) {
					document.getElementById("output2").innerHTML = "No coins.";
				} else if (2<roll && roll<66) {
					document.getElementById("output2").innerHTML = D8(4)*1000 + " gold.";
				} else {
					document.getElementById("output2").innerHTML = D10(4)*100 + " platinum.";
				}//end coins
				
				//art
				roll = D100(1);
				if (roll<3) {
					document.getElementById("output3").innerHTML = "No goods.";
				} else if (2<roll && roll<39) {
					Gem(D10(4));
				} else {
					Art(D6(7));
				}//end art

			}//end lvl 20

		}/*end go*/
		</script>
	</head>
	
	<body>
		
		<p><h1>Enter your party's average level<br>
		and the encounter's challenge rating.<br>
		When you are finished, hit the GO! button.</p>
		
		<form id="in">
			Party Level: <input type="number" id="level" min="1" max="20" value="1"><br>
			Challenge Rating: <input type="number" id="CR" min="1" max="20" value="1"><br>
			<button onClick="go(); return false;">GO!</button>
		</form></h1>
		
		<p id="output1" hidden></p>
		<p id="output2"></p>
		<p id="output3"></p>
		<p id="output4"></p>
		
		
		
	</body>
</html>